
<h3 id="chartTitle">{{ chartTitle }}</h3>

<figure class="bar-chart-from-list" role="figure" aria-labelledby="chartTitle">
  <figcaption class="usa-sr-only">{{- chartDescription -}}</figcaption>
  <ul class="bar-chart--vertical">
    <li class="y-axis" aria-hidden="true">
    {%- capture chartTicksString -%}
      0,{{ chartYMax | times: 0.25 }},{{ chartYMax | times: 0.5 }},{{ chartYMax | times: 0.75 }},{{ chartYMax }}
    {%- endcapture -%}
    {%- assign chartTicks = chartTicksString | split: ',' -%}
      {%- for tick in chartTicks -%}
        <span class="y-tick">{{- tick | round -}}</span>
      {%- endfor -%}
    </li>
    {%- for fy in chartData -%}
      <li class="fy" aria-describedby="{{- fy.name -}}_label">
        <h4 class="fy__wrapper-label font-sans-sm" id="{{- fy.name -}}_label">
          {{- fy.name -}}
        </h4>
        <ul class="fy__wrapper">
          <li class="bar-container">
            <span class="bar bg--projects_kicked_off" 
              data-value="{{ fy.projects_kicked_off }}" aria-hidden="true"
              style="height: {{ fy.projects_kicked_off | divided_by: chartYMax | times: 100 -}}%"></span>
            <span class="usa-sr-only">{{ fy.projects_kicked_off }} {{ chartLegend.projects_kicked_off.label }}</span>
          </li>
          <li class="bar-container">
            <span class="bar bg--projects_closed_out" 
              data-value="{{ fy.projects_closed_out }}" aria-hidden="true"
              style="height: {{ fy.projects_closed_out | divided_by: chartYMax | times: 100 -}}%"></span>
            <span class="usa-sr-only">{{ fy.projects_closed_out }} {{ chartLegend.projects_closed_out.label }}</span>
          </li>
          <li class="bar-container">
            <span class="bar bg--ideas_received" 
              data-value="{{ fy.ideas_received }}" aria-hidden="true"
              style="height: {{ fy.ideas_received | divided_by: chartYMax | times: 100 -}}%"></span>
            <span class="usa-sr-only">{{ fy.ideas_received }} {{ chartLegend.ideas_received.label }}</span>
          </li>
        </ul>
      </li>
    {%- endfor -%}
  </ul>

  <ul class="bar-chart__legend">
    {%- for item in chartLegend -%}
      <li class="font-sans-xs">
        <span class="bar-chart__legend__swatch bg--{{- item[0] }}"></span>
        {{- item[1].label -}}
      </li>
    {%- endfor -%}
  </ul>

</figure>


<style>
/* 
  or inline, style="background: {{- item[1].color -}}"  for legend
  and style="background: {{- chartLegend.projects_kicked_off.color -}}" for chart itself
*/ 

{% for item in chartLegend %}
.bg--{{- item[0] }} {
  background: {{ item[1].color }}
}
{% endfor %}
</style>