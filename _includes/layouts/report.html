---
layout: layouts/base.html
section: reports
---

{% assign reportSections = collections.reportSections | where: 'data.report_parent', report_key | sort: 'data.nav_order' %}

{%- capture back_to_top -%}
  <div class="display-flex flex-justify-end margin-top-2">
    <a class="usa-button to-top" href="#top">
      <span class="display-inline-block text-top">TOP </span>
      <svg class="usa-icon" aria-hidden="true" focusable="false" role="img">
        <use xlink:href="{{'/assets/images/sprite.svg#arrow_upward' | url}}"></use>
      </svg>    
    </a>
  </div>
{%- endcapture %}

{%- capture break -%}
  <div class="TxBreak TxBreak__accent-green TxBreak__extraWide"></div>
{%- endcapture %}


{%- if permalink -%}
<div class="portfolio-blog-pages">
  <div class="TxContent">
    <div class="banner-bg desktop:margin-bottom-2">
      <div class="banner-bg-gradient padding-y-2">
        <section class="grid-container header-section blog-post-header-section usa-section" aria-label="Introduction">
          <h1>{{ title }}</h1>
          {%- if intro != null -%}
          <h2>{{ intro | markdownify }}</h2>
          {%- endif -%}
        </section>
      </div>
    </div>
    <div class="grid-container usa-in-page-nav-container Tx__{{ page.fileSlug }} TxReport Tx--{{ page.fileSlug }} TxReport--template-1">
        <aside
          id="nav-sticky"
          class="usa-in-page-nav nav-sticky"
          data-heading-elements="h2"
          data-main-content-selector=".sub-main-content"
          data-title-text="On this page"
          data-title-heading-level="h3"
          data-scroll-offset="0"
          data-root-margin="0px 0px 0px 0px"
          data-threshold="1"
        >
        </aside>   
        <main class="sub-main-content TxReport__content">
          {% for section in reportSections %} 
            <section class="{{- section.data.class -}}" id="section-{{- section.data.nav_id -}}">
              {{- break -}}
              {{ section.templateContent }}
              {{- back_to_top -}}
            </section>
          {%- endfor -%}
          </main>
      </div>
    </div>
</div>
{%- endif -%}

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Function to update aria-current based on usa-current class
    function updateAriaCurrent() {   
      document.querySelectorAll('.usa-in-page-nav__link').forEach(link => {
        link.removeAttribute('aria-current');
      });

      const currentLink = document.querySelector('.usa-in-page-nav__link.usa-current');

      if (currentLink) {
        currentLink.setAttribute('aria-current', 'true');
      }
    }

    window.addEventListener('scroll', updateAriaCurrent);
    updateAriaCurrent();
  });
</script>